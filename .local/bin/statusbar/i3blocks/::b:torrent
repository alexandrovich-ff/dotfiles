#!/bin/sh

# vim: filetype=i3blocks
#  _____ ___  ____  ____  _____ _   _ _____ 
# |_   _/ _ \|  _ \|  _ \| ____| \ | |_   _|
#   | || | | | |_) | |_) |  _| |  \| | | |  
#   | || |_| |  _ <|  _ <| |___| |\  | | |  
#   |_| \___/|_| \_\_| \_\_____|_| \_| |_|  
#
# Ð¡ÐºÑ€Ð¸Ð¿Ñ‚ ÑÐ¾ÑÑ‚Ð¾ÑÐ½Ð¸Ñ Ñ‚Ð¾Ñ€Ñ€ÐµÐ½Ñ‚ ÐºÐ»Ð¸ÐµÐ½Ñ‚Ð°
# ÐÐ°Ð¿Ð¸ÑÐ°Ð½: @alexandrovich.ff
# Website: http://malikov.red

case $BLOCK_BUTTON in
    1) $TERMINAL -e transmission-remote-cli ;;
esac

transmission-remote -l | grep % |
    sed " # This first sed command is to ensure a desirable order with sort
    s/.*Stopped.*/A/g;
    s/.*Seeding.*/Z/g;
    s/.*100%.*/N/g;
    s/.*Idle.*/B/g;
    s/.*Uploading.*/L/g;
    s/.*%.*/M/g" |
        sort -h | uniq -c | sed " # Now we replace the standin letters with icons.
                s/A/ðŸ›‘/g;
                s/B/âŒ›ï¸/g;
                s/L/ðŸ”¼/g;
                s/M/ðŸ”½/g;
                s/N/âœ…/g;
                s/Z/ðŸŒ±/g" | awk '{print $2, $1}' | tr '\n' ' ' | sed -e "s/ $//g"